# BalanceAPI
Реализован микросервис для работы с балансом пользователей (зачисление средств, списание средств, перевод средств от пользователя к пользователю, методы получения баланса и истории транзакций пользователя).
Сервис предоставляет HTTP API и принимает/отдавает запросы/ответы в формате JSON.

### Использованы инструменты:
* Go
* PostgreSQL
* Docker

## Запуск
Для запуска нужно прописать команду:
```
make run
```
Если приложение запускается впервые, необходимо применить миграции к базе данных:
```
make migrate
```

## Запросы

### Зачисление средств:
![image](https://user-images.githubusercontent.com/101933425/194542917-1a755ccf-7275-4ac3-8fb4-feab863cbe35.png)

### Списание средств:
![image](https://user-images.githubusercontent.com/101933425/194543325-8ee5ed53-527f-483b-925e-b6f8e26ee7ae.png)

### Перевод средств от пользователя к пользователю:
![image](https://user-images.githubusercontent.com/101933425/194544707-bd07f589-c77e-4564-b9ac-161879481317.png)

### Баланс пользователя:
Этот метод возвращает баланс в рублях (int), но можно задать дополнительный параметр, чтобы вернуть в другой валюте (float64).
Для конвертации в другую валюту используется сайт https://exchangeratesapi.io/ , поэтому нужно получить токен с этого сайта и вставить в файл docker-compose.yml напротив поля `TOKEN:`.

![image](https://user-images.githubusercontent.com/101933425/194545725-ed0e7b8c-0ed8-4fef-81f2-14fd8a908233.png)
---
![image](https://user-images.githubusercontent.com/101933425/194545864-62d72576-b3e0-4664-8754-47412c55de9a.png)

### История транзакций:
Этот метод возвращает историю транзакций, но можно задать дополнительный параметр, чтобы отсортировать историю по дате или по сумме перевода.

![image](https://user-images.githubusercontent.com/101933425/194546638-550c9246-2245-45f0-96a8-1db45671437e.png)
---
![image](https://user-images.githubusercontent.com/101933425/194546676-9c5df6d7-b15e-458b-948e-c7c4919d2519.png)
---
![image](https://user-images.githubusercontent.com/101933425/194546860-2e7bfe63-dfeb-4046-9d4e-8d6ad171e9fd.png)

